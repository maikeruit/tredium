<template>
    <button 
        @click="handleLike" 
        class="flex items-center gap-1 text-gray-600 hover:text-blue-600 transition-colors"
        :disabled="isLoading"
    >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
        </svg>
        {{ likesCount }}
    </button>
</template>

<script>
export default {
    props: {
        articleId: {
            type: Number,
            required: true
        },
        initialLikes: {
            type: Number,
            required: true
        }
    },

    data() {
        return {
            likesCount: this.initialLikes,
            isLoading: false
        }
    },

    methods: {
        async handleLike() {
            if (this.isLoading) return

            this.isLoading = true
            
            try {
                const response = await axios.post(`/articles/${this.articleId}/like`)
                this.likesCount = response.data.count
            } catch (error) {
                console.error('Ошибка при добавлении лайка:', error)
            } finally {
                this.isLoading = false
            }
        }
    }
}
</script> 